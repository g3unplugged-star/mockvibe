<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MockVibe | SSC CGL Tier 1 Mock Test - Timed Exam</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #0d9488;
            --accent: #f59e0b;
            --danger: #ef4444;
            --success: #10b981;
            --warning: #f59e0b;
            --info: #3b82f6;
            --exam-blue: #1e40af;
            --exam-red: #dc2626;
            --exam-green: #059669;
            --exam-yellow: #d97706;
            --bg: #f8fafc;
            --card: #ffffff;
            --sidebar: #ffffff;
            --text: #1e293b;
            --text-light: #475569;
            --text-muted: #64748b;
            --border: #e2e8f0;
            --radius: 12px;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.12);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .exam-mode {
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
        }

        /* Exam Header */
        .exam-header {
            background: linear-gradient(135deg, #1e3a8a, #1e40af);
            color: white;
            padding: 16px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border-bottom: 3px solid var(--accent);
        }

        .exam-brand {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .exam-brand a {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
            color: white;
            cursor: pointer;
            transition: var(--transition);
        }

        .exam-brand a:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        .exam-brand h1 {
            font-family: 'Poppins', sans-serif;
            font-size: 1.4rem;
            font-weight: 700;
        }

        .exam-brand span {
            background: rgba(255, 255, 255, 0.15);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            cursor: default;
        }

        /* Real Exam Timer */
        .exam-timer-container {
            display: flex;
            align-items: center;
            gap: 24px;
        }

        .real-timer {
            background: rgba(0, 0, 0, 0.2);
            padding: 12px 24px;
            border-radius: var(--radius);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .timer-display {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.8rem;
            font-weight: 700;
            letter-spacing: 3px;
            text-align: center;
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .timer-label {
            font-size: 0.85rem;
            opacity: 0.9;
            text-align: center;
            margin-top: 4px;
            display: block;
        }

        /* Section Timer - FIXED: More specific selectors */
        .section-timer {
            background: rgba(0, 0, 0, 0.15);
            padding: 12px 20px;
            border-radius: var(--radius);
            text-align: center;
            min-width: 140px;
        }

        .section-timer .section-time {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.3rem;
            font-weight: 700;
            color: white;
            letter-spacing: 1px;
        }

        .section-timer .section-timer-name {
            font-size: 0.8rem;
            opacity: 0.9;
            display: block;
            margin-top: 4px;
            font-family: 'Inter', sans-serif;
            font-weight: 400;
            color: rgba(255, 255, 255, 0.9);
        }

        .timer-critical {
            animation: criticalPulse 0.5s infinite alternate;
        }

        @keyframes criticalPulse {
            from { color: white; }
            to { color: #ff6b6b; }
        }

        .test-container {
            display: grid;
            grid-template-columns: 280px 1fr;
            min-height: calc(100vh - 80px);
            gap: 0;
        }

        /* Enhanced Exam Sidebar */
        .exam-sidebar {
            background: var(--sidebar);
            border-right: 1px solid var(--border);
            padding: 24px;
            overflow-y: auto;
            position: sticky;
            top: 80px;
            height: calc(100vh - 80px);
            box-shadow: var(--shadow);
        }

        .exam-info {
            margin-bottom: 32px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--border);
        }

        .exam-title {
            font-family: 'Poppins', sans-serif;
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 12px;
            color: var(--exam-blue);
        }

        .exam-meta {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .meta-item i {
            width: 16px;
            text-align: center;
            color: var(--primary);
        }

        /* Exam Sections */
        .exam-sections {
            margin-bottom: 32px;
        }

        .section-card {
            background: white;
            border: 2px solid var(--border);
            border-radius: var(--radius);
            padding: 16px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: var(--transition);
        }

        .section-card.active {
            border-color: var(--primary);
            background: rgba(37, 99, 235, 0.05);
        }

        .section-card.completed {
            border-color: var(--success);
            background: rgba(16, 185, 129, 0.05);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .section-card .section-name {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            color: var(--text);
        }

        .section-status {
            font-size: 0.8rem;
            padding: 4px 8px;
            border-radius: 12px;
            font-weight: 500;
        }

        .status-not-started {
            background: var(--bg);
            color: var(--text-muted);
        }

        .status-in-progress {
            background: rgba(37, 99, 235, 0.1);
            color: var(--primary);
        }

        .status-completed {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .section-details {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        /* Enhanced Question Navigation */
        .question-nav-section {
            margin-bottom: 32px;
        }

        .nav-header {
            font-family: 'Poppins', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--text);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .question-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin-bottom: 20px;
        }

        .question-btn {
            width: 36px;
            height: 36px;
            border-radius: 6px;
            border: 2px solid var(--border);
            background: white;
            color: var(--text);
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .question-btn:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .question-btn.current {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            box-shadow: 0 4px 8px rgba(37, 99, 235, 0.2);
        }

        .question-btn.answered {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }

        .question-btn.marked {
            background: var(--warning);
            color: white;
            border-color: var(--warning);
        }

        .question-btn.not-visited {
            background: var(--bg);
            color: var(--text-muted);
            border-color: var(--border);
        }

        .question-btn.not-answered {
            background: var(--danger);
            color: white;
            border-color: var(--danger);
        }

        .legend-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin-top: 16px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 3px;
        }

        /* Exam Controls */
        .exam-controls {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 32px;
        }

        .btn {
            padding: 14px;
            border-radius: var(--radius);
            font-weight: 600;
            font-family: 'Poppins', sans-serif;
            border: none;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.95rem;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(37, 99, 235, 0.2);
        }

        .btn-outline {
            background: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-outline:hover {
            background: rgba(37, 99, 235, 0.05);
            transform: translateY(-2px);
        }

        .btn-warning {
            background: var(--warning);
            color: white;
        }

        .btn-warning:hover {
            background: #d97706;
            transform: translateY(-2px);
        }

        /* Main Content Area */
        .exam-content {
            padding: 32px;
            overflow-y: auto;
            max-width: 900px;
            margin: 0 auto;
            width: 100%;
        }

        /* Section Info */
        .section-info {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px;
            border-radius: var(--radius);
            margin-bottom: 24px;
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.2);
        }

        .section-info h2 {
            font-family: 'Poppins', sans-serif;
            font-size: 1.5rem;
            margin-bottom: 8px;
        }

        .section-stats {
            display: flex;
            gap: 24px;
            margin-top: 16px;
        }

        .section-stat {
            text-align: center;
        }

        .stat-value {
            font-family: 'Poppins', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            display: block;
        }

        .stat-label {
            font-size: 0.85rem;
            opacity: 0.9;
        }

        /* Question Area */
        .question-container {
            background: var(--card);
            border-radius: var(--radius);
            padding: 32px;
            box-shadow: var(--shadow);
            margin-bottom: 32px;
            border: 1px solid var(--border);
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 24px;
        }

        .question-number {
            background: var(--primary);
            color: white;
            padding: 8px 20px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1rem;
        }

        .question-meta {
            display: flex;
            gap: 16px;
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .meta-tag {
            background: var(--bg);
            padding: 4px 12px;
            border-radius: 12px;
        }

        .question-body {
            margin-bottom: 32px;
        }

        .question-text {
            font-size: 1.3rem;
            line-height: 1.7;
            margin-bottom: 24px;
            color: var(--text);
            font-weight: 500;
        }

        .question-image {
            max-width: 100%;
            border-radius: var(--radius);
            margin-bottom: 24px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--border);
        }

        /* Options */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 20px;
            background: white;
            border: 2px solid var(--border);
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }

        .option:hover {
            border-color: var(--primary);
            background: #f8fafc;
            transform: translateX(5px);
        }

        .option.selected {
            border-color: var(--primary);
            background: rgba(37, 99, 235, 0.05);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.1);
        }

        .option.correct {
            border-color: var(--success);
            background: rgba(16, 185, 129, 0.05);
        }

        .option.incorrect {
            border-color: var(--danger);
            background: rgba(239, 68, 68, 0.05);
        }

        .option-label {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: var(--bg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            margin-right: 20px;
            flex-shrink: 0;
            transition: var(--transition);
            font-size: 1.1rem;
        }

        .option.selected .option-label {
            background: var(--primary);
            color: white;
        }

        .option.correct .option-label {
            background: var(--success);
            color: white;
        }

        .option.incorrect .option-label {
            background: var(--danger);
            color: white;
        }

        .option-text {
            flex: 1;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        /* Question Actions */
        .question-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 32px;
            padding-top: 24px;
            border-top: 1px solid var(--border);
        }

        .action-group {
            display: flex;
            gap: 12px;
        }

        .btn-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            background: var(--bg);
            border: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            color: var(--text-muted);
        }

        .btn-icon:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .btn-icon.active {
            background: var(--warning);
            color: white;
            border-color: var(--warning);
        }

        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            gap: 16px;
        }

        /* Exam Instructions */
        .instructions-panel {
            background: #fef3c7;
            border: 2px solid #f59e0b;
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 24px;
        }

        .instructions-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .instructions-header h3 {
            font-family: 'Poppins', sans-serif;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .instructions-list {
            padding-left: 20px;
            margin-bottom: 16px;
        }

        .instructions-list li {
            margin-bottom: 8px;
            color: var(--text-light);
        }

        /* Warning Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            backdrop-filter: blur(5px);
            padding: 20px;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: white;
            border-radius: var(--radius);
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-lg);
            transform: translateY(20px);
            transition: transform 0.4s ease;
            border: 3px solid var(--danger);
        }

        .modal-overlay.active .modal {
            transform: translateY(0);
        }

        .modal-header {
            padding: 24px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, #dc2626, #ef4444);
            color: white;
            border-radius: var(--radius) var(--radius) 0 0;
        }

        .modal-header h2 {
            font-family: 'Poppins', sans-serif;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .modal-close {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-body {
            padding: 24px;
        }

        .modal-footer {
            padding: 20px 24px 24px;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }

        /* Auto-Submit Warning */
        .auto-submit-warning {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #dc2626, #ef4444);
            color: white;
            padding: 16px 24px;
            border-radius: var(--radius);
            box-shadow: 0 8px 25px rgba(220, 38, 38, 0.3);
            z-index: 1001;
            display: none;
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from {
                transform: translateY(100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Test Not Started Overlay */
        .test-not-started-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 20px;
        }

        .test-start-modal {
            background: white;
            border-radius: var(--radius);
            max-width: 600px;
            width: 100%;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            border: 3px solid var(--primary);
        }

        .test-start-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 24px;
            text-align: center;
        }

        .test-start-header h2 {
            font-family: 'Poppins', sans-serif;
            font-size: 1.8rem;
            margin-bottom: 12px;
        }

        .test-start-body {
            padding: 32px;
        }

        .test-instructions {
            margin-bottom: 32px;
        }

        .test-instructions h3 {
            font-family: 'Poppins', sans-serif;
            margin-bottom: 16px;
            color: var(--text);
        }

        .test-instructions ul {
            padding-left: 20px;
            margin-bottom: 20px;
        }

        .test-instructions li {
            margin-bottom: 10px;
            color: var(--text-light);
        }

        .test-timer-info {
            background: #f0f9ff;
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 24px;
            border: 2px solid var(--primary);
        }

        .timer-info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }

        .timer-info-item {
            text-align: center;
        }

        .timer-info-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .timer-info-label {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .test-container {
                grid-template-columns: 1fr;
            }
            
            .exam-sidebar {
                position: fixed;
                top: 80px;
                left: -100%;
                width: 320px;
                height: calc(100vh - 80px);
                z-index: 100;
                transition: left 0.3s ease;
                box-shadow: var(--shadow-lg);
            }
            
            .exam-sidebar.active {
                left: 0;
            }
            
            .mobile-toggle {
                position: fixed;
                bottom: 24px;
                right: 24px;
                width: 56px;
                height: 56px;
                border-radius: 50%;
                background: var(--primary);
                color: white;
                border: none;
                font-size: 1.5rem;
                cursor: pointer;
                z-index: 99;
                box-shadow: 0 8px 25px rgba(37, 99, 235, 0.3);
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .exam-header {
                flex-direction: column;
                gap: 12px;
                padding: 12px 16px;
            }
            
            .exam-timer-container {
                width: 100%;
                justify-content: center;
                flex-wrap: wrap;
                gap: 12px;
            }

            .real-timer, .section-timer {
                min-width: 160px;
            }

            .timer-info-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .exam-content {
                padding: 20px;
            }
            
            .question-container {
                padding: 24px;
            }
            
            .question-header {
                flex-direction: column;
                gap: 12px;
            }
            
            .question-meta {
                width: 100%;
                justify-content: space-between;
            }
            
            .question-actions {
                flex-direction: column;
                gap: 16px;
            }
            
            .action-group {
                width: 100%;
                justify-content: space-between;
            }
            
            .nav-buttons {
                width: 100%;
            }
            
            .timer-display {
                font-size: 1.5rem;
                letter-spacing: 2px;
            }

            .section-timer .section-time {
                font-size: 1.2rem;
            }

            .test-start-body {
                padding: 20px;
            }
        }

        @media (max-width: 480px) {
            .question-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .option {
                padding: 16px;
            }
            
            .option-label {
                width: 36px;
                height: 36px;
                margin-right: 12px;
            }
            
            .section-stats {
                flex-direction: column;
                gap: 12px;
            }
            
            .modal {
                width: 95%;
            }

            .exam-brand h1 {
                font-size: 1.2rem;
            }

            .real-timer, .section-timer {
                padding: 10px 16px;
                min-width: 140px;
            }
        }
    </style>
</head>
<body class="exam-mode">
    <!-- Test Start Overlay -->
    <div class="test-not-started-overlay" id="testStartOverlay">
        <div class="test-start-modal">
            <div class="test-start-header">
                <h2><i class="fas fa-graduation-cap"></i> SSC CGL Tier 1 Mock Test</h2>
                <p>Get ready for your timed exam simulation</p>
            </div>
            
            <div class="test-start-body">
                <div class="test-instructions">
                    <h3><i class="fas fa-info-circle"></i> Important Instructions</h3>
                    <ul>
                        <li>Total duration: <strong>60 minutes</strong> for 100 questions</li>
                        <li>Section-wise time limits apply</li>
                        <li>Each question carries 2 marks</li>
                        <li>Negative marking: 0.5 marks for wrong answers</li>
                        <li>Use the question palette to navigate between questions</li>
                        <li>Timer will start as soon as you begin the test</li>
                        <li>You cannot pause the timer once started</li>
                        <li>Ensure stable internet connection</li>
                        <li><strong>Note:</strong> Timer resets when you start a new test</li>
                    </ul>
                </div>
                
                <div class="test-timer-info">
                    <h4 style="text-align: center; margin-bottom: 20px; color: var(--primary);">
                        <i class="fas fa-clock"></i> Time Limits
                    </h4>
                    <div class="timer-info-grid">
                        <div class="timer-info-item">
                            <div class="timer-info-value">60:00</div>
                            <div class="timer-info-label">Total Time</div>
                        </div>
                        <div class="timer-info-item">
                            <div class="timer-info-value">25:00</div>
                            <div class="timer-info-label">Quantitative Aptitude</div>
                        </div>
                        <div class="timer-info-item">
                            <div class="timer-info-value">20:00</div>
                            <div class="timer-info-label">General Intelligence</div>
                        </div>
                        <div class="timer-info-item">
                            <div class="timer-info-value">20:00</div>
                            <div class="timer-info-label">English Language</div>
                        </div>
                    </div>
                </div>
                
                <div style="display: flex; justify-content: center; gap: 16px;">
                    <button class="btn btn-outline" onclick="cancelTest()">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                    <button class="btn btn-primary" onclick="startTest()">
                        <i class="fas fa-play"></i> Start Test
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Exam Header with Timer - FIXED: Added clickable logo -->
    <header class="exam-header" style="display: none;" id="examHeader">
        <div class="exam-brand">
            <a href="https://g3unplugged-star.github.io/mockvibe/index.html" title="Go to Homepage" onclick="return goToHomepage()">
                <i class="fas fa-graduation-cap"></i>
                <h1>MockVibe Exam</h1>
            </a>
            <span>LIVE TEST</span>
        </div>
        
        <div class="exam-timer-container">
            <div class="real-timer">
                <div class="timer-display" id="mainTimer">60:00</div>
                <span class="timer-label">Total Time Remaining</span>
            </div>
            
            <div class="section-timer">
                <div class="section-time" id="sectionTimer">25:00</div>
                <span class="section-timer-name" id="sectionTimerName">Quantitative Aptitude</span>
            </div>
        </div>
    </header>

    <div class="test-container" style="display: none;" id="testContainer">
        <!-- Exam Sidebar -->
        <aside class="exam-sidebar" id="sidebar">
            <div class="exam-info">
                <h2 class="exam-title">SSC CGL Tier 1 Mock Test</h2>
                <div class="exam-meta">
                    <div class="meta-item">
                        <i class="fas fa-calendar"></i>
                        <span>Date: <strong id="examDate"></strong></span>
                    </div>
                    <div class="meta-item">
                        <i class="fas fa-clock"></i>
                        <span>Duration: <strong>60 Min</strong></span>
                    </div>
                    <div class="meta-item">
                        <i class="fas fa-question-circle"></i>
                        <span>Questions: <strong>100</strong></span>
                    </div>
                    <div class="meta-item">
                        <i class="fas fa-chart-line"></i>
                        <span>Marks: <strong>200</strong></span>
                    </div>
                </div>
            </div>

            <!-- Exam Sections -->
            <div class="exam-sections">
                <div class="section-card active" data-section="quant">
                    <div class="section-header">
                        <span class="section-name">Quantitative Aptitude</span>
                        <span class="section-status status-in-progress">IN PROGRESS</span>
                    </div>
                    <div class="section-details">
                        <span>25 Questions</span>
                        <span>25 Minutes</span>
                    </div>
                </div>
                
                <div class="section-card" data-section="reasoning">
                    <div class="section-header">
                        <span class="section-name">General Intelligence</span>
                        <span class="section-status status-not-started">NOT STARTED</span>
                    </div>
                    <div class="section-details">
                        <span>25 Questions</span>
                        <span>20 Minutes</span>
                    </div>
                </div>
                
                <div class="section-card" data-section="english">
                    <div class="section-header">
                        <span class="section-name">English Language</span>
                        <span class="section-status status-not-started">NOT STARTED</span>
                    </div>
                    <div class="section-details">
                        <span>25 Questions</span>
                        <span>20 Minutes</span>
                    </div>
                </div>
                
                <div class="section-card" data-section="gk">
                    <div class="section-header">
                        <span class="section-name">General Awareness</span>
                        <span class="section-status status-not-started">NOT STARTED</span>
                    </div>
                    <div class="section-details">
                        <span>25 Questions</span>
                        <span>15 Minutes</span>
                    </div>
                </div>
            </div>

            <!-- Question Navigation -->
            <div class="question-nav-section">
                <div class="nav-header">
                    <span>Question Palette</span>
                    <span id="answeredCount">0/25</span>
                </div>
                
                <div class="question-grid" id="questionGrid">
                    <!-- Questions will be dynamically generated -->
                </div>
                
                <div class="legend-grid">
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--primary);"></div>
                        <span>Current</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--success);"></div>
                        <span>Answered</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--warning);"></div>
                        <span>Marked</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--danger);"></div>
                        <span>Not Answered</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--bg);"></div>
                        <span>Not Visited</span>
                    </div>
                </div>
            </div>

            <!-- Exam Controls -->
            <div class="exam-controls">
                <button class="btn btn-primary" onclick="submitSection()">
                    <i class="fas fa-forward"></i> Submit Section
                </button>
                <button class="btn btn-outline" onclick="showSummary()">
                    <i class="fas fa-chart-pie"></i> View Summary
                </button>
                <button class="btn btn-warning" onclick="submitExam()">
                    <i class="fas fa-flag-checkered"></i> Submit Exam
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="exam-content">
            <!-- Section Instructions -->
            <div class="instructions-panel" id="instructionsPanel">
                <div class="instructions-header">
                    <h3><i class="fas fa-info-circle"></i> Section Instructions</h3>
                    <button class="btn-icon" onclick="hideInstructions()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <ul class="instructions-list">
                    <li>This section contains 25 questions</li>
                    <li>Time allotted: 25 minutes</li>
                    <li>Each question carries 2 marks</li>
                    <li>There is negative marking of 0.5 marks for wrong answers</li>
                    <li>Use the question palette to navigate between questions</li>
                    <li>Click "Mark for Review" to flag questions for later review</li>
                </ul>
                <button class="btn btn-primary" onclick="hideInstructions()">
                    <i class="fas fa-play"></i> Start Section
                </button>
            </div>

            <!-- Section Info -->
            <div class="section-info">
                <h2>Quantitative Aptitude</h2>
                <p>Solve questions based on arithmetic, algebra, geometry, and data interpretation</p>
                <div class="section-stats">
                    <div class="section-stat">
                        <span class="stat-value" id="sectionTimeRemaining">25:00</span>
                        <span class="stat-label">Time Remaining</span>
                    </div>
                    <div class="section-stat">
                        <span class="stat-value" id="sectionAnswered">0</span>
                        <span class="stat-label">Answered</span>
                    </div>
                    <div class="section-stat">
                        <span class="stat-value" id="sectionMarked">0</span>
                        <span class="stat-label">Marked</span>
                    </div>
                </div>
            </div>

            <!-- Question Container -->
            <div class="question-container">
                <div class="question-header">
                    <div class="question-number">Question 1 of 25</div>
                    <div class="question-meta">
                        <span class="meta-tag">Marks: +2, -0.5</span>
                        <span class="meta-tag">Difficulty: Medium</span>
                        <span class="meta-tag">Time: 60 sec</span>
                    </div>
                </div>
                
                <div class="question-body">
                    <div class="question-text">
                        If the selling price of an article is doubled, then its profit triples. Find the profit percent.
                    </div>
                    
                    <!-- Question Image (Optional) -->
                    <img src="https://via.placeholder.com/800x400?text=Math+Diagram" 
                         alt="Question Diagram" 
                         class="question-image" 
                         id="questionImage" 
                         style="display: none;">
                    
                    <!-- Options -->
                    <div class="options-grid">
                        <div class="option" onclick="selectOption(0)">
                            <div class="option-label">A</div>
                            <div class="option-text">100%</div>
                        </div>
                        <div class="option" onclick="selectOption(1)">
                            <div class="option-label">B</div>
                            <div class="option-text">200%</div>
                        </div>
                        <div class="option" onclick="selectOption(2)">
                            <div class="option-label">C</div>
                            <div class="option-text">300%</div>
                        </div>
                        <div class="option" onclick="selectOption(3)">
                            <div class="option-label">D</div>
                            <div class="option-text">400%</div>
                        </div>
                    </div>
                </div>

                <!-- Question Actions -->
                <div class="question-actions">
                    <div class="action-group">
                        <button class="btn-icon" onclick="markForReview()" id="reviewBtn" title="Mark for Review">
                            <i class="fas fa-flag"></i>
                        </button>
                        <button class="btn-icon" onclick="clearResponse()" title="Clear Response">
                            <i class="fas fa-eraser"></i>
                        </button>
                        <button class="btn-icon" onclick="showCalculator()" title="Calculator">
                            <i class="fas fa-calculator"></i>
                        </button>
                    </div>
                    
                    <div class="nav-buttons">
                        <button class="btn btn-outline" onclick="prevQuestion()">
                            <i class="fas fa-arrow-left"></i> Previous
                        </button>
                        <button class="btn btn-primary" onclick="nextQuestion()">
                            Save & Next <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Mobile Toggle Button -->
    <button class="mobile-toggle" id="sidebarToggle" style="display: none;">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Auto-Submit Warning -->
    <div class="auto-submit-warning" id="autoSubmitWarning">
        <strong><i class="fas fa-exclamation-triangle"></i> WARNING:</strong> 
        Test will auto-submit in <span id="warningTime">30</span> seconds!
    </div>

    <!-- Section Submit Modal -->
    <div class="modal-overlay" id="submitSectionModal">
        <div class="modal">
            <div class="modal-header">
                <h2><i class="fas fa-forward"></i> Submit Section</h2>
                <button class="modal-close" onclick="closeSubmitModal()">&times;</button>
            </div>
            
            <div class="modal-body">
                <div style="text-align: center; margin-bottom: 24px;">
                    <i class="fas fa-exclamation-circle" style="font-size: 3rem; color: var(--warning); margin-bottom: 16px;"></i>
                    <h3 style="font-family: 'Poppins', sans-serif; margin-bottom: 12px;">Are you sure you want to submit this section?</h3>
                    <p style="color: var(--text-light); margin-bottom: 20px;">
                        Once submitted, you cannot return to this section. Please review your answers before proceeding.
                    </p>
                </div>
                
                <div style="background: #f8fafc; padding: 20px; border-radius: var(--radius); margin-bottom: 24px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                        <span>Answered Questions:</span>
                        <strong id="modalAnswered">0</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                        <span>Marked for Review:</span>
                        <strong style="color: var(--warning);" id="modalMarked">0</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span>Not Answered:</span>
                        <strong style="color: var(--danger);" id="modalNotAnswered">25</strong>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeSubmitModal()">
                    Cancel
                </button>
                <button class="btn btn-primary" onclick="confirmSubmitSection()">
                    Submit Section
                </button>
            </div>
        </div>
    </div>

    <!-- Test Summary Modal -->
    <div class="modal-overlay" id="summaryModal">
        <div class="modal" style="max-width: 700px;">
            <div class="modal-header">
                <h2><i class="fas fa-chart-pie"></i> Test Summary</h2>
                <button class="modal-close" onclick="closeSummaryModal()">&times;</button>
            </div>
            
            <div class="modal-body">
                <div style="margin-bottom: 24px;">
                    <h3 style="font-family: 'Poppins', sans-serif; margin-bottom: 16px; color: var(--primary);">Overall Test Status</h3>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; margin-bottom: 20px;">
                        <div style="background: #f8fafc; padding: 20px; border-radius: var(--radius); border: 1px solid var(--border);">
                            <div style="font-size: 2.5rem; font-weight: 700; color: var(--primary); text-align: center;" id="summaryTotalAnswered">0</div>
                            <div style="text-align: center; color: var(--text-muted); font-size: 0.9rem;">Total Answered</div>
                        </div>
                        <div style="background: #f8fafc; padding: 20px; border-radius: var(--radius); border: 1px solid var(--border);">
                            <div style="font-size: 2.5rem; font-weight: 700; color: var(--warning); text-align: center;" id="summaryTotalMarked">0</div>
                            <div style="text-align: center; color: var(--text-muted); font-size: 0.9rem;">Marked for Review</div>
                        </div>
                    </div>
                </div>
                
                <div style="margin-bottom: 24px;">
                    <h3 style="font-family: 'Poppins', sans-serif; margin-bottom: 16px; color: var(--primary);">Section-wise Summary</h3>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
                        <div style="background: white; padding: 16px; border-radius: 8px; border: 1px solid var(--border);">
                            <div style="font-weight: 600; color: var(--primary);">Quantitative Aptitude</div>
                            <div style="font-size: 0.9rem; color: var(--text-muted);" id="summaryQuant">0/25 answered</div>
                        </div>
                        <div style="background: white; padding: 16px; border-radius: 8px; border: 1px solid var(--border);">
                            <div style="font-weight: 600; color: var(--text-muted);">General Intelligence</div>
                            <div style="font-size: 0.9rem; color: var(--text-muted);" id="summaryReasoning">0/25 answered</div>
                        </div>
                        <div style="background: white; padding: 16px; border-radius: 8px; border: 1px solid var(--border);">
                            <div style="font-weight: 600; color: var(--text-muted);">English Language</div>
                            <div style="font-size: 0.9rem; color: var(--text-muted);" id="summaryEnglish">0/25 answered</div>
                        </div>
                        <div style="background: white; padding: 16px; border-radius: 8px; border: 1px solid var(--border);">
                            <div style="font-weight: 600; color: var(--text-muted);">General Awareness</div>
                            <div style="font-size: 0.9rem; color: var(--text-muted);" id="summaryGK">0/25 answered</div>
                        </div>
                    </div>
                </div>
                
                <div style="background: #f0f9ff; padding: 20px; border-radius: var(--radius); border: 2px solid var(--primary);">
                    <h4 style="font-family: 'Poppins', sans-serif; margin-bottom: 12px; color: var(--primary);">
                        <i class="fas fa-clock"></i> Time Status
                    </h4>
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-weight: 600; font-size: 1.2rem;" id="summaryMainTime">60:00</div>
                            <div style="font-size: 0.9rem; color: var(--text-muted);">Total Time Remaining</div>
                        </div>
                        <div>
                            <div style="font-weight: 600; font-size: 1.2rem;" id="summarySectionTime">25:00</div>
                            <div style="font-size: 0.9rem; color: var(--text-muted);" id="summarySectionName">Quantitative Aptitude</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeSummaryModal()">
                    Close
                </button>
                <button class="btn btn-primary" onclick="closeSummaryModal(); navigateToQuestion(1);">
                    Go to First Question
                </button>
            </div>
        </div>
    </div>

    <!-- Final Submit Modal -->
    <div class="modal-overlay" id="submitExamModal">
        <div class="modal">
            <div class="modal-header">
                <h2><i class="fas fa-flag-checkered"></i> Submit Exam</h2>
                <button class="modal-close" onclick="closeSubmitExamModal()">&times;</button>
            </div>
            
            <div class="modal-body">
                <div style="text-align: center; margin-bottom: 24px;">
                    <i class="fas fa-check-circle" style="font-size: 3rem; color: var(--success); margin-bottom: 16px;"></i>
                    <h3 style="font-family: 'Poppins', sans-serif; margin-bottom: 12px;">Exam Completion</h3>
                    <p style="color: var(--text-light); margin-bottom: 20px;">
                        You are about to submit your final answers. Please ensure you have reviewed all sections.
                    </p>
                </div>
                
                <div style="background: #f8fafc; padding: 20px; border-radius: var(--radius);">
                    <h4 style="font-family: 'Poppins', sans-serif; margin-bottom: 16px;">Section-wise Summary</h4>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
                        <div style="background: white; padding: 12px; border-radius: 8px; border: 1px solid var(--border);">
                            <div style="font-weight: 600; color: var(--primary);">Quantitative Aptitude</div>
                            <div style="font-size: 0.9rem; color: var(--text-muted);" id="finalQuant">0/25 answered</div>
                        </div>
                        <div style="background: white; padding: 12px; border-radius: 8px; border: 1px solid var(--border);">
                            <div style="font-weight: 600; color: var(--text-muted);">General Intelligence</div>
                            <div style="font-size: 0.9rem; color: var(--text-muted);" id="finalReasoning">0/25 answered</div>
                        </div>
                        <div style="background: white; padding: 12px; border-radius: 8px; border: 1px solid var(--border);">
                            <div style="font-weight: 600; color: var(--text-muted);">English Language</div>
                            <div style="font-size: 0.9rem; color: var(--text-muted);" id="finalEnglish">0/25 answered</div>
                        </div>
                        <div style="background: white; padding: 12px; border-radius: 8px; border: 1px solid var(--border);">
                            <div style="font-weight: 600; color: var(--text-muted);">General Awareness</div>
                            <div style="font-size: 0.9rem; color: var(--text-muted);" id="finalGK">0/25 answered</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeSubmitExamModal()">
                    Continue Exam
                </button>
                <button class="btn btn-primary" onclick="confirmSubmitExam()">
                    Submit Final Answers
                </button>
            </div>
        </div>
    </div>

    <script>
    // Real Exam Configuration
    const examConfig = {
        totalDuration: 60 * 60, // 60 minutes
        sections: {
            quant: 25 * 60,
            reasoning: 20 * 60,
            english: 20 * 60,
            gk: 15 * 60
        },
        sectionQuestions: 25,
        currentSection: 'quant',
        currentQuestion: 1,
        answers: {},
        markedQuestions: new Set(),
        visitedQuestions: new Set(),
        testStarted: false,
        startTime: null,
        mainTimerInterval: null,
        sectionTimerInterval: null
    };

    // DOM Elements
    const testStartOverlay = document.getElementById('testStartOverlay');
    const examHeader = document.getElementById('examHeader');
    const testContainer = document.getElementById('testContainer');
    const mainTimerElement = document.getElementById('mainTimer');
    const sectionTimerElement = document.getElementById('sectionTimer');
    const sectionTimerNameElement = document.getElementById('sectionTimerName');
    const examDateElement = document.getElementById('examDate');
    const questionGrid = document.getElementById('questionGrid');
    const answeredCount = document.getElementById('answeredCount');

    // Get section from URL
    function getSectionFromURL() {
        const urlParams = new URLSearchParams(window.location.search);
        const section = urlParams.get('section');
        return section || 'quant';
    }

    // Load questions from JSON
    async function loadQuestions() {
        const section = examConfig.currentSection;
        console.log(`Loading questions for: ${section}`);
        
        try {
            // IMPORTANT: Check if this path is correct for your GitHub Pages
            // Try both paths if one fails
            const paths = [
                `../data/previous-papers/ssc-cgl/${section}.json`,
                `./data/previous-papers/ssc-cgl/${section}.json`,
                `https://g3unplugged-star.github.io/mockvibe/data/previous-papers/ssc-cgl/${section}.json`
            ];
            
            let response = null;
            let lastError = null;
            
            for (const path of paths) {
                try {
                    console.log(`Trying path: ${path}`);
                    response = await fetch(path);
                    if (response.ok) break;
                } catch (error) {
                    lastError = error;
                    console.log(`Failed to load from ${path}:`, error);
                }
            }
            
            if (!response || !response.ok) {
                throw new Error(`Could not load ${section}.json from any path`);
            }
            
            const data = await response.json();
            console.log(`Successfully loaded ${section} questions:`, data);
            
            // Store questions globally
            window.questionsData = data;
            
            // Update section name if available
            if (data.subject) {
                sectionTimerNameElement.textContent = data.subject;
                document.querySelector('.section-info h2').textContent = data.subject;
            }
            
            return true;
            
        } catch (error) {
            console.error('Error loading questions:', error);
            
            // Create sample questions as fallback
            window.questionsData = {
                subject: getSectionDisplayName(section),
                sections: [{
                    section_name: 'Practice Questions',
                    questions: createSampleQuestions()
                }]
            };
            
            showNotification('Using sample questions', 'warning');
            return false;
        }
    }

    // Create sample questions
    function createSampleQuestions() {
        const questions = [];
        for (let i = 1; i <= 25; i++) {
            questions.push({
                id: `Q${i}`,
                question: `Sample Question ${i}: What is the correct answer?`,
                options: ["Option A", "Option B", "Option C", "Option D"],
                correct_answer: "Option A",
                explanation: "This is a sample explanation for the question.",
                difficulty: i < 9 ? 'easy' : i < 17 ? 'medium' : 'hard'
            });
        }
        return questions;
    }

    // Get section display name
    function getSectionDisplayName(section) {
        const names = {
            quant: 'Quantitative Aptitude',
            reasoning: 'General Intelligence',
            english: 'English Language',
            gk: 'General Awareness'
        };
        return names[section] || section;
    }

    // Get current question data
    function getCurrentQuestionData() {
        const questionIndex = examConfig.currentQuestion - 1;
        
        if (!window.questionsData) {
            console.log('No questions data available, creating sample');
            return {
                question: `Question ${examConfig.currentQuestion}: What is the solution?`,
                options: ["Option A", "Option B", "Option C", "Option D"],
                difficulty: 'medium'
            };
        }
        
        // Try to extract questions from the loaded data
        let allQuestions = [];
        
        if (window.questionsData.sections && window.questionsData.sections.length > 0) {
            // Structure with sections
            window.questionsData.sections.forEach(section => {
                if (section.questions) {
                    allQuestions = allQuestions.concat(section.questions);
                }
            });
        } else if (window.questionsData.topics && window.questionsData.topics.length > 0) {
            // Structure with topics
            window.questionsData.topics.forEach(topic => {
                if (topic.questions) {
                    allQuestions = allQuestions.concat(topic.questions);
                }
            });
        } else if (window.questionsData.questions) {
            // Direct questions array
            allQuestions = window.questionsData.questions;
        }
        
        // If no questions found, create sample
        if (allQuestions.length === 0) {
            allQuestions = createSampleQuestions();
        }
        
        // Ensure we have enough questions
        while (allQuestions.length < 25) {
            allQuestions = allQuestions.concat(createSampleQuestions().slice(0, 25 - allQuestions.length));
        }
        
        if (questionIndex >= 0 && questionIndex < allQuestions.length) {
            return allQuestions[questionIndex];
        }
        
        // Return sample if index is out of bounds
        return {
            question: `Question ${examConfig.currentQuestion}: What is the solution?`,
            options: ["Option A", "Option B", "Option C", "Option D"],
            difficulty: 'medium'
        };
    }

    // Initialize UI
    function initUI() {
        // Set exam date
        const now = new Date();
        examDateElement.textContent = now.toLocaleDateString('en-IN', {
            day: 'numeric',
            month: 'long',
            year: 'numeric'
        });
        
        // Get section from URL
        examConfig.currentSection = getSectionFromURL();
        
        // Update section name
        const sectionName = getSectionDisplayName(examConfig.currentSection);
        sectionTimerNameElement.textContent = sectionName;
        document.querySelector('.section-info h2').textContent = sectionName;
        
        // Initialize question grid
        initQuestionGrid();
        
        // Set initial timer displays
        updateMainTimerDisplay(examConfig.totalDuration);
        updateSectionTimerDisplay(examConfig.sections[examConfig.currentSection]);
        
        console.log('UI initialized for section:', examConfig.currentSection);
    }

    // Initialize question grid
    function initQuestionGrid() {
        questionGrid.innerHTML = '';
        
        for (let i = 1; i <= examConfig.sectionQuestions; i++) {
            const btn = document.createElement('button');
            btn.className = 'question-btn not-visited';
            btn.textContent = i;
            btn.onclick = () => navigateToQuestion(i);
            questionGrid.appendChild(btn);
        }
    }

    // START TEST - Main function
    async function startTest() {
        console.log('=== STARTING TEST ===');
        
        // Hide start overlay
        testStartOverlay.style.display = 'none';
        
        // Show exam interface
        examHeader.style.display = 'flex';
        testContainer.style.display = 'grid';
        
        // Set test as started
        examConfig.testStarted = true;
        examConfig.startTime = Date.now();
        
        // Load questions for current section
        await loadQuestions();
        
        // Mark first question as visited
        examConfig.visitedQuestions.add(1);
        
        // Start timers
        startMainTimer();
        startSectionTimer();
        
        // Update UI
        updateQuestionDisplay();
        updateQuestionStatus();
        
        // Show success message
        showNotification('Test started! Good luck!', 'success');
        
        console.log('Test started successfully for section:', examConfig.currentSection);
    }

    // Start main timer
    function startMainTimer() {
        examConfig.mainTimerInterval = setInterval(() => {
            if (!examConfig.testStarted) return;
            
            const elapsed = Math.floor((Date.now() - examConfig.startTime) / 1000);
            const remaining = Math.max(0, examConfig.totalDuration - elapsed);
            
            updateMainTimerDisplay(remaining);
            
            if (remaining <= 0) {
                clearInterval(examConfig.mainTimerInterval);
                autoSubmitExam();
            }
        }, 1000);
    }

    // Start section timer
    function startSectionTimer() {
        examConfig.sectionTimerInterval = setInterval(() => {
            if (!examConfig.testStarted) return;
            
            const elapsed = Math.floor((Date.now() - examConfig.startTime) / 1000);
            const sectionTime = examConfig.sections[examConfig.currentSection];
            const remaining = Math.max(0, sectionTime - (elapsed % examConfig.totalDuration));
            
            updateSectionTimerDisplay(remaining);
            
            if (remaining <= 0) {
                clearInterval(examConfig.sectionTimerInterval);
            }
        }, 1000);
    }

    // Update main timer display
    function updateMainTimerDisplay(seconds) {
        const minutes = Math.floor(seconds / 60);
        const secs = seconds % 60;
        mainTimerElement.textContent = `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        
        if (seconds <= 300) {
            mainTimerElement.classList.add('timer-critical');
        } else {
            mainTimerElement.classList.remove('timer-critical');
        }
    }

    // Update section timer display
    function updateSectionTimerDisplay(seconds) {
        const minutes = Math.floor(seconds / 60);
        const secs = seconds % 60;
        sectionTimerElement.textContent = `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        document.getElementById('sectionTimeRemaining').textContent = `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    }

    // Update question display
    function updateQuestionDisplay() {
        const totalQuestions = examConfig.sectionQuestions;
        
        // Update question number
        document.querySelector('.question-number').textContent = 
            `Question ${examConfig.currentQuestion} of ${totalQuestions}`;
        
        // Get question data
        const questionData = getCurrentQuestionData();
        
        // Update question text
        document.querySelector('.question-text').textContent = questionData.question;
        
        // Update meta tags
        const metaContainer = document.querySelector('.question-meta');
        metaContainer.innerHTML = `
            <span class="meta-tag">Marks: +2, -0.5</span>
            <span class="meta-tag">Difficulty: ${questionData.difficulty || 'Medium'}</span>
            <span class="meta-tag">Time: 60 sec</span>
        `;
        
        // Update options
        const optionsGrid = document.querySelector('.options-grid');
        optionsGrid.innerHTML = '';
        
        const options = questionData.options || ["Option A", "Option B", "Option C", "Option D"];
        options.forEach((option, index) => {
            const optionDiv = document.createElement('div');
            optionDiv.className = 'option';
            optionDiv.onclick = () => selectOption(index);
            optionDiv.innerHTML = `
                <div class="option-label">${String.fromCharCode(65 + index)}</div>
                <div class="option-text">${option}</div>
            `;
            optionsGrid.appendChild(optionDiv);
        });
        
        // Restore saved answer if exists
        const questionKey = `${examConfig.currentSection}-${examConfig.currentQuestion}`;
        if (examConfig.answers[questionKey] !== undefined) {
            updateOptionSelection(examConfig.answers[questionKey]);
        }
        
        // Update question buttons and review button
        updateQuestionButtons();
        updateReviewButton();
    }

    // Select an option
    function selectOption(optionIndex) {
        if (!examConfig.testStarted) return;
        
        const questionKey = `${examConfig.currentSection}-${examConfig.currentQuestion}`;
        examConfig.answers[questionKey] = optionIndex;
        
        updateOptionSelection(optionIndex);
        updateQuestionStatus();
    }

    // Update option selection UI
    function updateOptionSelection(selectedIndex) {
        const options = document.querySelectorAll('.option');
        options.forEach((opt, idx) => {
            opt.classList.remove('selected');
            if (idx === selectedIndex) {
                opt.classList.add('selected');
            }
        });
    }

    // Mark for review
    function markForReview() {
        if (!examConfig.testStarted) return;
        
        const questionKey = `${examConfig.currentSection}-${examConfig.currentQuestion}`;
        
        if (examConfig.markedQuestions.has(questionKey)) {
            examConfig.markedQuestions.delete(questionKey);
            showNotification('Review mark removed', 'info');
        } else {
            examConfig.markedQuestions.add(questionKey);
            showNotification('Marked for review', 'warning');
        }
        
        updateReviewButton();
        updateQuestionStatus();
    }

    // Update review button
    function updateReviewButton() {
        const questionKey = `${examConfig.currentSection}-${examConfig.currentQuestion}`;
        const isMarked = examConfig.markedQuestions.has(questionKey);
        const reviewBtn = document.getElementById('reviewBtn');
        
        if (reviewBtn) {
            reviewBtn.classList.toggle('active', isMarked);
            reviewBtn.title = isMarked ? 'Remove Review Mark' : 'Mark for Review';
        }
    }

    // Clear response
    function clearResponse() {
        if (!examConfig.testStarted) return;
        
        const questionKey = `${examConfig.currentSection}-${examConfig.currentQuestion}`;
        delete examConfig.answers[questionKey];
        examConfig.markedQuestions.delete(questionKey);
        
        const options = document.querySelectorAll('.option');
        options.forEach(opt => {
            opt.classList.remove('selected');
        });
        
        updateQuestionStatus();
        showNotification('Response cleared', 'info');
    }

    // Navigate to question
    function navigateToQuestion(questionNumber) {
        if (!examConfig.testStarted) return;
        
        examConfig.currentQuestion = questionNumber;
        examConfig.visitedQuestions.add(questionNumber);
        
        updateQuestionDisplay();
        updateQuestionButtons();
        updateReviewButton();
        
        if (window.innerWidth <= 1024) {
            document.getElementById('sidebar').classList.remove('active');
        }
    }

    // Next question
    function nextQuestion() {
        if (!examConfig.testStarted) return;
        
        if (examConfig.currentQuestion < examConfig.sectionQuestions) {
            navigateToQuestion(examConfig.currentQuestion + 1);
        }
    }

    // Previous question
    function prevQuestion() {
        if (!examConfig.testStarted) return;
        
        if (examConfig.currentQuestion > 1) {
            navigateToQuestion(examConfig.currentQuestion - 1);
        }
    }

    // Update question buttons
    function updateQuestionButtons() {
        const buttons = document.querySelectorAll('.question-btn');
        buttons.forEach((btn, idx) => {
            const questionNum = idx + 1;
            const questionKey = `${examConfig.currentSection}-${questionNum}`;
            
            // Reset classes
            btn.className = 'question-btn';
            
            // Set status
            if (questionNum === examConfig.currentQuestion) {
                btn.classList.add('current');
            } else if (examConfig.answers[questionKey] !== undefined) {
                btn.classList.add('answered');
            } else if (examConfig.markedQuestions.has(questionKey)) {
                btn.classList.add('marked');
            } else if (examConfig.visitedQuestions.has(questionNum)) {
                btn.classList.add('not-answered');
            } else {
                btn.classList.add('not-visited');
            }
        });
    }

    // Update question status
    function updateQuestionStatus() {
        let answered = 0;
        let marked = 0;
        
        for (let i = 1; i <= examConfig.sectionQuestions; i++) {
            const questionKey = `${examConfig.currentSection}-${i}`;
            if (examConfig.answers[questionKey] !== undefined) {
                answered++;
            }
            if (examConfig.markedQuestions.has(questionKey)) {
                marked++;
            }
        }
        
        answeredCount.textContent = `${answered}/${examConfig.sectionQuestions}`;
        document.getElementById('sectionAnswered').textContent = answered;
        document.getElementById('sectionMarked').textContent = marked;
    }

    // Show notification
    function showNotification(message, type = 'info') {
        // Implementation for showing notifications
        console.log(`${type.toUpperCase()}: ${message}`);
        
        // You can implement a proper notification UI here
        const notification = document.createElement('div');
        notification.style.cssText = `
            position: fixed;
            top: 100px;
            right: 20px;
            background: ${type === 'success' ? '#10b981' : 
                       type === 'warning' ? '#f59e0b' : 
                       type === 'danger' ? '#ef4444' : '#3b82f6'};
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            font-family: 'Inter', sans-serif;
        `;
        notification.textContent = message;
        document.body.appendChild(notification);
        
        setTimeout(() => {
            notification.remove();
        }, 3000);
    }

    // Cancel test
    function cancelTest() {
        if (confirm('Cancel test and return to homepage?')) {
            window.location.href = 'https://g3unplugged-star.github.io/mockvibe/index.html';
        }
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', () => {
        console.log('Page loaded');
        
        // Always show start overlay first
        testStartOverlay.style.display = 'flex';
        examHeader.style.display = 'none';
        testContainer.style.display = 'none';
        
        // Initialize UI
        initUI();
        
        console.log('Ready to start test');
    });

    // Add these functions to handle the missing references in your HTML
    function hideInstructions() {
        document.getElementById('instructionsPanel').style.display = 'none';
    }
    
    function showCalculator() {
        showNotification('Calculator feature would open here', 'info');
    }
    
    function submitSection() {
        if (!examConfig.testStarted) {
            showNotification('Please start the test first!', 'warning');
            return;
        }
        showNotification('Section submit feature', 'info');
    }
    
    function showSummary() {
        if (!examConfig.testStarted) {
            showNotification('Please start the test first!', 'warning');
            return;
        }
        showNotification('Summary feature', 'info');
    }
    
    function submitExam() {
        if (!examConfig.testStarted) {
            showNotification('Please start the test first!', 'warning');
            return;
        }
        showNotification('Exam submit feature', 'info');
    }
    
    function autoSubmitExam() {
        showNotification('Time up! Auto-submitting exam...', 'danger');
        // Implement auto-submit logic here
    }
</script>
</body>
</html>
